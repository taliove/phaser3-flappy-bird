webpackJsonp([1],{NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("H0RG");var i=class extends Phaser.Scene{constructor(){super({key:"preload"})}progress(){let{width:t,height:e}=this.sys.game.canvas,s=e/2-5,i=t-100,a=this.add.graphics({config:{x:50,y:s}});this.load.on("progress",function(t){a.clear(),a.lineStyle(1,16777215,1),a.fillStyle(16777215,1),a.strokeRoundedRect(49,s-1,i+2,12,5),a.fillRoundedRect(50,s,Math.floor(i*t),10,5)})}preload(){this.progress(),this.load.multiatlas("assets","static/assets/atlas.json","static/assets"),this.load.bitmapFont("flappy_font","static/assets/fonts/flappyfont/flappyfont.png","static/assets/fonts/flappyfont/flappyfont.fnt"),this.load.audio("fly_sound",["static/assets/sounds/wing.ogg","static/assets/sounds/wing.mp3"]),this.load.audio("score_sound",["static/assets/sounds/point.ogg","static/assets/sounds/point.mp3"]),this.load.audio("hit_pipe_sound",["static/assets/sounds/hit.ogg","static/assets/sounds/hit.mp3"]),this.load.audio("hit_ground_sound",["static/assets/sounds/die.ogg","static/assets/sounds/die.mp3"]),this.load.audio("swooshing",["static/assets/sounds/swooshing.ogg","static/assets/sounds/swooshing.mp3"]),this.load.image("score_board","static/assets/scoreboard.png"),this.load.spritesheet("medals","static/assets/medals.png",{frameWidth:44,frameHeight:46})}create(){this.scene.start("menu")}};let a=[{key:"yellow-bird",config:{start:1,end:3,prefix:"yellow-bird",suffix:".png"}},{key:"blue-bird",config:{start:1,end:3,prefix:"blue-bird",suffix:".png"}},{key:"red-bird",config:{start:1,end:3,prefix:"red-bird",suffix:".png"}}],h=["bg-dark.png","bg-day.png"];const r={count:a.length,yellow:a[0],blue:a[1],red:a[2],get:t=>t<a.length?a[t]:null,getRandom:()=>a[Phaser.Math.Between(0,a.length-1)]},d={dark:h[0],day:h[1],getRandom:()=>h[Phaser.Math.Between(0,h.length-1)]};var o=class extends Phaser.Scene{constructor(){super({key:"menu"})}create(){let{width:t,height:e}=this.sys.game.canvas,s=.8*e;this.bg=this.add.tileSprite(0,0,t,e,"assets",d.day).setOrigin(0),this.ground=this.add.tileSprite(0,s,t,112,"assets","ground.png").setOrigin(0);let i=this.add.sprite(t/2,230,"bird");i.setSize(34,24),this.anims.create({key:r.yellow.key,frames:this.anims.generateFrameNames("assets",r.yellow.config),frameRate:12,repeat:-1}),this.anims.create({key:r.blue.key,frames:this.anims.generateFrameNames("assets",r.blue.config),frameRate:12,repeat:-1}),this.anims.create({key:r.red.key,frames:this.anims.generateFrameNames("assets",r.red.config),frameRate:12,repeat:-1}),i.anims.play(r.yellow.key,!0);let a=this.add.image(t/2,170,"assets","flappy.png"),h=this.add.group();h.add(i),h.add(a),this.add.tween({targets:[i],y:"+=5",ease:null,delay:0,duration:400,yoyo:!0,repeat:-1}),this.add.sprite(t/2,e-150,"assets","start.png").setInteractive().on("pointerdown",()=>{this.scene.start("play")})}update(){this.ground.tilePositionX+=2}},n={key:"boot",preload(){this.load.image("loading","static/assets/preloader.gif")},create(){this.scene.start("preload")}};var l=new class{constructor(){}getMaxScore(){return this.getStorage("max-score",0)}setMaxScore(t){this.setStorage("max-score",t)}setStorage(t,e){window.localStorage&&window.localStorage.setItem(t,window.JSON.stringify(e))}getStorage(t,e){return window.localStorage?window.JSON.parse(window.localStorage.getItem(t))||e:void 0===e?null:e}};var p=[n,i,o,class extends Phaser.Scene{constructor(){super({key:"play"}),this.pipeIndex=0,this.score=0,this.width=0,this.height=0,this.gap=165,this.gameSpeed=-110,this.pipeDelay=1500,this.flyHeight=-300,this.birdGravity=245,this.hasStarted=!1,this.gameIsOver=!1,this.hasHitGround=!1,this.hasHitPipe=!1}init(){let{width:t,height:e}=this.sys.game.canvas;this.width=t,this.height=e,this.hasStarted=!1,this.gameIsOver=!1,this.hasHitGround=!1,this.hasHitPipe=!1,this.theme={bg:d.getRandom(),bird:r.getRandom()}}create(){let{width:t,height:e}=this.sys.game.canvas;this.init(),this.bg=this.add.tileSprite(0,0,t,e,"assets",this.theme.bg).setOrigin(0),this.ground=this.add.tileSprite(0,e-112,t,112,"assets","ground.png").setOrigin(0).setDepth(999),this.physics.add.existing(this.ground,!0),this.labelScore=this.add.bitmapText(t/2-10,50,"flappy_font","0").setScale(.6).setDepth(3),this.labelScoreGroup=this.add.group(),this.labelScoreGroup.add(this.labelScore,!0),this.labelScoreBoard=this.labelScoreGroup.create(t/2,100,"score_board").setDepth(2),this.labelScoreMedal=this.labelScoreGroup.create(t/2-65,105,"medals",0).setDepth(2),this.gameOver=this.labelScoreGroup.create(t/2,0,"assets","gameover.png").setDepth(3),this.labelScoreGroup.create(t/2,e/2-50,"assets","start.png").setInteractive().setDepth(2).on("pointerdown",()=>{this.scene.start("play")}),this.labelScoreGroup.toggleVisible(),this.soundFly=this.sound.add("fly_sound"),this.soundScore=this.sound.add("score_sound"),this.soundHitGround=this.sound.add("hit_pipe_sound"),this.soundHitPipe=this.sound.add("hit_pipe_sound"),this.bird=this.physics.add.sprite(90,260,"bird").setDepth(1),this.bird.body.setCircle(13,2,-2),this.bird.setBounce(.4),this.bird.setCollideWorldBounds(!0),this.birdTween=this.add.tween({targets:[this.bird],y:"+=5",delay:0,duration:400,yoyo:!0,repeat:-1}),this.playTip=this.add.image(t/2,230,"assets","tips.png").setOrigin(.5,0),this.bird.setBounce(.1),this.bird.setCollideWorldBounds(!0),this.bird.anims.play(this.theme.bird.key,!0),this.bird.body.setGravityY(this.birdGravity),this.bird.body.setAllowGravity(!1),this.readyText=this.add.image(t/2,110,"assets","ready.png").setOrigin(.5,0),this.flyTween=this.tweens.add({targets:[this.bird],angle:{getStart(t,e,s){let i=t[e];return i<=-45?-45:i>=0?-45:t[e]},getEnd:()=>-45},duration:350,onStart:(t,e)=>{this.flyDoing=!0,this.flyDownTween.isPlaying()&&this.flyDownTween.stop()},onComplete:(t,e)=>{this.flyDoing&&(this.flyDoing=!1,this.flyDownTween.isPlaying())?this.flyDownTween.stop():this.flyDownTween.restart()}}),this.flyTween.pause(),this.flyDownTween=this.tweens.add({delay:(t,e)=>{let s=this.bird.body.velocity.y,i=10*Math.abs(s);return i=i<=50?200:i>=350?350:i},targets:[this.bird],angle:{getStart:(t,e,s)=>t[e],getEnd:()=>90},duration:()=>{let t=1.5*this.getBirdHeight();return t=t<=200?300:400}}),this.flyDownTween.pause(),this.pipes=this.add.group(),this.input.on("pointerdown",this.startGame,this),this.timer=this.time.addEvent({delay:this.pipeDelay,loop:!0,callback:this.addColumnPipes,paused:!0,callbackScope:this}),this.physicBirdPipe=this.physics.add.overlap(this.bird,this.pipes,this.hitPipe,null,this),this.physicBirdGround=this.physics.add.collider(this.bird,this.ground,this.hitGround,null,this)}startGame(){this.hasStarted||this.gameIsOver?this.fly():(this.gameIsOver=!1,this.hasHitGround=!1,this.hasStarted=!0,this.score=0,this.birdTween.stop(),this.bird.body.setAllowGravity(!0),this.readyText.destroy(),this.playTip.destroy(),this.timer.paused=!1,this.labelScore.setVisible(!0))}stopGame(){this.cameras.main.shake(40),this.gameIsOver=!0,this.time.removeAllEvents(),this.hasStarted=!1,this.timer.paused=!0,this.labelScoreGroup.toggleVisible();let t=l.getMaxScore()||0,e=!1;t<this.score&&(t=this.score,l.setMaxScore(this.score),e=!0),this.labelScore.setScale(.3).setVisible(!0),this.labelScore.setPosition(this.width-this.labelScore.width-45,80),this.score>=100?this.labelScoreMedal.setFrame(1):this.score>=50?this.labelScoreMedal.setFrame(0):this.labelScoreMedal.setVisible(!1);let s=this.add.bitmapText(this.width/2+80,127,"flappy_font",t).setScale(.3).setDepth(3);s.setPosition(this.width-s.width-45,127),this.labelScoreGroup.add(s,!0),this.add.tween({targets:this.labelScoreGroup.getChildren(),y:"+=100",alpha:1,duration:600}),this.add.tween({targets:this.bird,angle:()=>this.bird.angle<90&&this.bird.angle>=0?90:this.bird.angle,duration:()=>{let t=1.5*this.getBirdHeight();return t<=0?10:t},state(){return this.duration<=0?1:0}}),this.bird.setActive(!1),this.pipes.getChildren().forEach(t=>{t.body.setAllowGravity(!1),t.setActive(!1).setVelocity(0)})}getBirdHeight(){return this.ground.y-this.bird.y-this.bird.height/2}hitPipe(){this.hasHitPipe||this.hasHitGround||(this.hasHitPipe=!0,this.physicBirdPipe.destroy(),this.stopGame(),this.soundHitPipe.play())}hitGround(){this.hasHitGround||this.hasHitPipe||(this.soundHitGround.play(),this.hasHitGround=!0,this.stopGame())}fly(){this.hasStarted&&!this.gameIsOver&&(this.bird.body.setVelocityY(this.flyHeight),this.flyTween.restart(),this.soundFly.play())}addColumnPipes(){let t=this.height-this.gap-87,e=Phaser.Math.Between(25,t),s=e-160,i=e+this.gap+100;this.addOnePipe(this.width,s,i)}addOnePipe(t,e,s){let i=this.pipes.getChildren();if(i.length>=6){let a=i[0],h=i[1];this.pipes.remove(a),this.pipes.remove(h),a.hasScored=!1,h.hasScored=!1,a.setPosition(t,e),h.setPosition(t,s),this.pipes.add(a),this.pipes.add(h)}else{let i=this.physics.add.sprite(t,e,"assets","pipe-green-top.png").setActive(!0).setVelocity(this.gameSpeed,0).setGravity(0),a=this.physics.add.sprite(t,s,"assets","pipe-green-bottom.png").setActive(!0).setVelocity(this.gameSpeed,0).setGravity(0);i.body.setAllowGravity(!1),a.body.setAllowGravity(!1),i.pipeIndex=this.pipeIndex,a.pipeIndex=this.pipeIndex,this.pipes.add(i),this.pipes.add(a)}this.pipeIndex++}update(){this.gameIsOver||(this.ground.tilePositionX+=2),this.hasStarted&&this.pipes.getChildren().forEach(function(t,e){if(e%2==0)return!1;!t.hasScored&&t.x<=this.bird.x+this.bird.width&&(t.hasScored=!0,this.labelScore.setText(++this.score),this.soundScore.play())},this)}}];window.onload=function(){var t={type:Phaser.AUTO,parent:"phaser-app",width:288,height:505,zoom:2,autoResize:!0,scene:p,physics:{default:"arcade",arcade:{debug:!1,gravity:{y:500}}}};function e(){var e=document.querySelector("canvas"),s=window.innerWidth,i=window.innerHeight,a=t.width/t.height;s>i?(e.style.width=i*a+"px",e.style.height="100%"):(e.style.width="100%",e.style.height=s/a+"px")}new Phaser.Game(t).scene.start("boot"),window.addEventListener("resize",e,!1),e()}}},["NHnr"]);
//# sourceMappingURL=app.8a6ef83c.js.map